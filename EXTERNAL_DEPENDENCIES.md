# External Dependencies for dominated-web Project

This document lists all external files and dependencies that the `dominated-web` project uses outside of its own directory.

## Python Scripts (Required)

These Python scripts must be located in `root/bittensor/affine-cortex/`:

1. **`get_keys_batch.py`**
   - Location: `root/bittensor/affine-cortex/get_keys_batch.py`
   - Purpose: Gets coldkey and hotkey for multiple UIDs in batch
   - Used by: `pages/api/rank.ts` (multiple times)

2. **`get_commit_batch.py`**
   - Location: `root/bittensor/affine-cortex/get_commit_batch.py`
   - Purpose: Gets chute_id and model full name for multiple UIDs in batch
   - Used by: 
     - `pages/api/rank.ts` (multiple times)
     - `pages/api/model-size.ts`
     - `scripts/update-model-sizes.ts`

3. **`get_modelsize_batch.py`**
   - Location: `root/bittensor/affine-cortex/get_modelsize_batch.py`
   - Purpose: Gets model size in GB for multiple UIDs or model names in batch
   - Note: This script imports from `dominated-web/functions/get_modelsize_scraping.py`
   - Used by:
     - `pages/api/rank.ts` (multiple times)
     - `pages/api/model-size.ts`
     - `scripts/update-model-sizes.ts`

## Directories (Required)

1. **`root/bittensor/affine-cortex/reports/`**
   - Purpose: Directory where `af get-rank` command saves report files
   - Used by:
     - `pages/api/rank.ts` (reads report files from here)
     - `scripts/update-model-sizes.ts` (reads report files from here)
   - Note: Must be created if it doesn't exist: `mkdir -p root/bittensor/affine-cortex/reports`

## Python Environment (Required)

1. **`.venv` virtual environment**
   - Location: `root/bittensor/affine-cortex/.venv/`
   - Purpose: Python virtual environment that must be activated before running Python scripts
   - Used by: All Python script executions in the project

## CLI Tools (Required)

1. **`af` command**
   - Purpose: CLI tool to execute `af get-rank` command
   - Used by: `pages/api/rank.ts` (line 237)
   - Note: Must be available in PATH or accessible from `root/bittensor/affine-cortex/` directory

## Environment Variables (Optional but Recommended)

1. **`CHUTES_API_KEY`**
   - Purpose: API key for Chutes API (used for chute status)
   - Used by: 
     - `ecosystem.config.js` (PM2 config)
     - `pages/api/miner-status.ts`
   - Note: Optional - if not set, chute status will be null

## Summary

### Files to Backup:
- `root/bittensor/affine-cortex/get_keys_batch.py`
- `root/bittensor/affine-cortex/get_commit_batch.py`
- `root/bittensor/affine-cortex/get_modelsize_batch.py`
- `root/bittensor/affine-cortex/dominated-web/functions/get_modelsize_scraping.py` (already in project, but referenced by external script)

### Directories to Backup:
- `root/bittensor/affine-cortex/reports/` (contains report files generated by `af get-rank`)

### Dependencies to Note:
- Python virtual environment at `root/bittensor/affine-cortex/.venv/` (may need to recreate)
- `af` CLI tool (must be installed/available)
- Python dependencies for the scripts (affine package, etc.)

### Configuration Files (Already in Project):
- `root/bittensor/affine-cortex/dominated-web/my_model_prefix.json`
- `root/bittensor/affine-cortex/dominated-web/team_model_prefix.json`

## Backup Command Example

To backup all required external files:

```bash
# Create backup directory
mkdir -p /path/to/backup/dominated-web-external

# Copy Python scripts
cp root/bittensor/affine-cortex/get_keys_batch.py /path/to/backup/dominated-web-external/
cp root/bittensor/affine-cortex/get_commit_batch.py /path/to/backup/dominated-web-external/
cp root/bittensor/affine-cortex/get_modelsize_batch.py /path/to/backup/dominated-web-external/

# Copy reports directory (if you want to backup existing reports)
cp -r root/bittensor/affine-cortex/reports /path/to/backup/dominated-web-external/ 2>/dev/null || echo "Reports directory may not exist yet"

# Note: .venv should be recreated in the new environment, not copied
```

